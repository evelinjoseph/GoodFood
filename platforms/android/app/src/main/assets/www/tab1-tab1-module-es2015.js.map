{"version":3,"sources":["./src/app/tab1/tab1.page.html","./src/app/tab1/tab1-routing.module.ts","./src/app/tab1/tab1.module.ts","./src/app/tab1/tab1.page.scss","./src/app/tab1/tab1.page.ts"],"names":[],"mappings":"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","file":"tab1-tab1-module-es2015.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar mode=\\\"ios\\\" color=\\\"primary\\\">\\r\\n    <ion-title>Good Food</ion-title>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-menu-button autoHide=\\\"false\\\"></ion-menu-button>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content fullscreen [hidden]=\\\"!isReady\\\"> \\r\\n\\r\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"doRefresh($event)\\\">\\r\\n    <ion-refresher-content></ion-refresher-content>\\r\\n  </ion-refresher>\\r\\n  \\r\\n  <br>\\r\\n  <ion-toolbar> \\r\\n    <ion-row>\\r\\n      <ion-col size=\\\"10\\\">\\r\\n      <ion-searchbar mode=\\\"ios\\\" (ionInput)=\\\"search($event)\\\" placeholder = {{searchText}}></ion-searchbar>\\r\\n    </ion-col>\\r\\n      <ion-col size=\\\"1\\\">\\r\\n      <ion-icon size=\\\"4\\\" name=\\\"options\\\" (click)=\\\"filterSearch()\\\"></ion-icon>\\r\\n    </ion-col>\\r\\n  </ion-row> \\r\\n    </ion-toolbar> \\r\\n    <!-- \\r\\n    <ion-item>\\r\\n      <ion-range id=\\\"dual-range\\\" dual-knobs pin color=\\\"primary\\\" [(ngModel)]=\\\"dualValue2\\\" min=\\\"0\\\" max=\\\"100\\\" step=\\\"1\\\" snaps=\\\"true\\\">\\r\\n        <ion-label slot=\\\"start\\\" >0</ion-label>\\r\\n        <ion-label slot=\\\"end\\\">100</ion-label>\\r\\n      </ion-range>\\r\\n    </ion-item> -->\\r\\n  <div *ngFor=\\\"let item of listings\\\">   \\r\\n    <ion-card [routerLink]=\\\"['/user-listing']\\\" [queryParams]=\\\"{ id: item.listingID }\\\" routerDirection=\\\"forward\\\">\\r\\n     <!-- <ion-item> \\r\\n       <ion-icon name=\\\"restaurant\\\" slot=\\\"start\\\"></ion-icon>\\r\\n       <ion-label class=\\\"ion-text-wrap\\\">{{item.name}}</ion-label>   \\r\\n      </ion-item> \\r\\n       <ion-card> -->\\r\\n        <!-- <img src=\\\"./madison.jpg\\\" /> -->\\r\\n        \\r\\n        <img src={{item.url}} style=\\\"width:100%;\\\"> \\r\\n        <ion-card-header> \\r\\n          <ion-card-title class=\\\"ion-text-wrap\\\">{{item.name}}</ion-card-title>\\r\\n        </ion-card-header>\\r\\n   \\r\\n     <ion-card-content> \\r\\n     \\r\\n       <p> Price: ${{item.price | number:'1.2-2'}}</p>\\r\\n       <p> Description: {{item.description}}</p>\\r\\n       <p> Location: {{item.location}}</p>\\r\\n       <p> Retailer Type: {{item.retailerType}}</p>\\r\\n     </ion-card-content>\\r\\n   </ion-card>\\r\\n  </div>\\r\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { Tab1Page } from './tab1.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: Tab1Page,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class Tab1PageRoutingModule {}\n","import { IonicModule } from '@ionic/angular';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Tab1Page } from './tab1.page';\n\nimport { Tab1PageRoutingModule } from './tab1-routing.module';\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    Tab1PageRoutingModule\n  ],\n  declarations: [Tab1Page]\n})\nexport class Tab1PageModule {}\n","export default \"ion-icon {\\n  font-size: 35px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdGFiMS90YWIxLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGVBQUE7QUFDSiIsImZpbGUiOiJzcmMvYXBwL3RhYjEvdGFiMS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24taWNvbiB7XHJcbiAgICBmb250LXNpemU6IDM1cHg7XHJcbn0iXX0= */\";","import { Component, OnInit, ChangeDetectorRef } from '@angular/core';\r\nimport { AngularFireAuth } from '@angular/fire/auth';\r\nimport { LoadingController, AlertController, NavController } from '@ionic/angular';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { first } from 'rxjs/operators';\r\nimport { AngularFireStorage } from '@angular/fire/storage';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { ListingsService} from '../listings.service';\r\n\r\n@Component({\r\n  selector: 'app-tab1',\r\n  templateUrl: 'tab1.page.html',\r\n  styleUrls: ['tab1.page.scss']\r\n})\r\nexport class Tab1Page implements OnInit{\r\n\r\n  public listings: any[];\r\n  public listingsBackup: any[];\r\n  deleteListings: any[];\r\n  searchText = \"Search By Food\";\r\n  searchBy = \"Food\";\r\n  dateNow;\r\n  url; \r\n  retailerUID;\r\n  ID;\r\n  isReady: Boolean = false;\r\n\r\n\r\n  constructor(public listingService: ListingsService, private afStorage: AngularFireStorage, private activatedRoute: ActivatedRoute, private nacCtrl: NavController, public afAuth: AngularFireAuth, private firestore: AngularFirestore, private changeDetection: ChangeDetectorRef, public loadingController: LoadingController, public alertController: AlertController) {}\r\n\r\n\r\n  async ngOnInit() {\r\n    this.presentLoading(); \r\n    this.listings = await this.initializeItems();\r\n    \r\n}\r\n\r\n\r\nasync initializeItems(): Promise<any> {\r\n  let listing: any[] = await this.listingService.initializeItems();  \r\n\r\n  var self = this;\r\n  listing.forEach(async function(element, ind, array) { \r\n  var retailerURL;\r\n    var storageRef =  await self.afStorage.ref(`images/${element.retailerUID}`).getDownloadURL().toPromise().then(function(url) {\r\n      retailerURL = url;\r\n   }).catch(function(error) {\r\n     retailerURL = 'assets/images/default.png';\r\n   });\r\n    const data = {\r\n      deleteDate: element.deleteDate,\r\n      description: element.description,\r\n      listingID: element.listingID,\r\n      location: element.location,\r\n      name: element.name,\r\n      price: element.price,\r\n      quantity: element.quantity,\r\n      retailerType: element.retailerType,     \r\n      retailerUID: element.retailerUID,\r\n      url: retailerURL      \r\n    }   \r\n    array[ind] = data \r\n  });\r\n\r\n  this.listingsBackup = listing;  \r\n  return listing;\r\n}\r\n\r\n \r\n\r\n  search(event){\r\n    this.listings = this.listingsBackup;\r\n    const searchTerm = event.srcElement.value;\r\n\r\n    if(!searchTerm){\r\n      this.changeDetection.detectChanges(); \r\n      return;\r\n    }\r\n\r\n    if(this.searchBy == \"Food\"){\r\n      this.listings = this.listings.filter(currentListing => {\r\n        if (currentListing.name && searchTerm) {\r\n          return (currentListing.name.toLowerCase().indexOf(searchTerm.toLowerCase()) > -1);\r\n        }\r\n      });  \r\n    }\r\n\r\n    else if(this.searchBy == \"Location\"){\r\n      this.listings = this.listings.filter(currentListing => {\r\n        if (currentListing.location && searchTerm) {\r\n          return (currentListing.location.toLowerCase().indexOf(searchTerm.toLowerCase()) > -1);\r\n        }\r\n      });\r\n    }\r\n\r\n    else if(this.searchBy == \"Retailer\"){\r\n      this.listings = this.listings.filter(currentListing => {\r\n        if (currentListing.retailerType && searchTerm) {\r\n          return (currentListing.retailerType.toLowerCase().indexOf(searchTerm.toLowerCase()) > -1);\r\n        }\r\n      });\r\n    }     \r\n    this.changeDetection.detectChanges(); \r\n  }\r\n\r\n  filterSearch(){\r\n    this.presentAlertRadio();\r\n    this.changeDetection.detectChanges(); \r\n  }\r\n\r\n  async presentAlertRadio() {\r\n    const alert = await this.alertController.create({\r\n      cssClass: 'my-custom-class',\r\n      header: 'Search By:',\r\n      inputs: [\r\n        {\r\n          name: 'radio1',\r\n          type: 'radio',\r\n          label: 'Food',\r\n          value: 'Food',\r\n          checked: true\r\n        },\r\n        {\r\n          name: 'radio2',\r\n          type: 'radio',\r\n          label: 'Retailer',\r\n          value: 'Retailer'\r\n        },\r\n        {\r\n          name: 'radio3',\r\n          type: 'radio',\r\n          label: 'Location',\r\n          value: 'Location'\r\n        }\r\n      ],\r\n      buttons: [\r\n        {\r\n          text: 'Cancel',\r\n          role: 'cancel',\r\n          cssClass: 'secondary',\r\n          handler: () => {\r\n          }\r\n        }, {\r\n          text: 'OK',\r\n          handler: (data:string) => {\r\n            this.searchText = \"Search By \" + data;\r\n            this.searchBy = data;\r\n            \r\n          }\r\n        }\r\n      ]\r\n    });\r\n\r\n    await alert.present();\r\n  }\r\n\r\n  async presentLoading() {\r\n    const loading = await this.loadingController.create({\r\n      duration: 700,\r\n      translucent: true,\r\n      cssClass: 'transparent',\r\n      backdropDismiss: false\r\n    });\r\n    await loading.present();\r\n\r\n    const { role, data } = await loading.onDidDismiss();\r\n    this.isReady = true; \r\n    this.changeDetection.detectChanges(); \r\n  }\r\n\r\n  async doRefresh(event) {\r\n    this.listings = await this.initializeItems();    \r\n    event.target.complete();\r\n  }\r\n\r\n}"],"sourceRoot":"webpack:///"}