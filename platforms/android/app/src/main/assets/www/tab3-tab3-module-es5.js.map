{"version":3,"sources":["webpack:///src/app/tab3/tab3.page.html","webpack:///src/app/tab3/tab3-routing.module.ts","webpack:///src/app/tab3/tab3.module.ts","webpack:///src/app/tab3/tab3.page.scss","webpack:///src/app/tab3/tab3.page.ts"],"names":["routes","path","component","Tab3PageRoutingModule","imports","forChild","exports","Tab3PageModule","declarations","Tab3Page","afauth","nacCtrl","afstore","changeDetection","alertCtrl","cart","subtotal","isReady","self","onAuthStateChanged","user","userUID","uid","items","doc","userItems","valueChanges","detectChanges","getCart","get","toPromise","then","querySnapshot","cart1","forEach","element","push","totalPrice","error","console","log","item","presentAlertDelete","confirm","update","FieldValue","arrayRemove","name","description","listingID","retailerUID","quantity","quantityCart","price","filter","currentListing","toLowerCase","promise","Promise","resolve","resolveFunction","create","header","message","buttons","text","handler","alert","present","quantityValue","priceValue","arrayUnion","presentAlertCheck","navigateRoot","selector","template"],"mappings":"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","file":"tab3-tab3-module-es5.js","sourcesContent":["export default \"<ion-header style=\\\"text-align: center\\\">\\r\\n  <ion-toolbar mode=\\\"ios\\\" color=\\\"primary\\\">\\r\\n    <ion-title>Good Food</ion-title>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-menu-button autoHide=\\\"true\\\"></ion-menu-button>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content fullscreen [hidden]=\\\"!isReady\\\">\\r\\n  <div *ngFor=\\\"let item of cart\\\">\\r\\n    <ion-card>\\r\\n     <ion-item>\\r\\n      <ion-card-title class=\\\"ion-text-wrap\\\">{{item.name}}</ion-card-title>\\r\\n      <ion-button  (click)=\\\"delete(item)\\\" fill=\\\"outline\\\" slot=\\\"end\\\">Delete</ion-button> \\r\\n    </ion-item>\\r\\n   \\r\\n     <ion-card-content> \\r\\n        <p style=\\\"font-size: large;\\\" > Quantity: \\r\\n          <ion-button (click)=\\\"dec(item)\\\" size=\\\"small\\\" fill=\\\"clear\\\"> \\r\\n            <ion-icon name=\\\"remove-circle-outline\\\"></ion-icon> \\r\\n          </ion-button>\\r\\n          {{item.quantityCart}}\\r\\n          <ion-button (click)=\\\"inc(item)\\\" size=\\\"small\\\" fill=\\\"clear\\\"> \\r\\n            <ion-icon name=\\\"add-circle-outline\\\"></ion-icon> \\r\\n          </ion-button></p>\\r\\n          <p style=\\\"font-size: large;\\\"> Price: ${{item.totalPrice | number:'1.2-2'}}</p>\\r\\n        <p style=\\\"font-size: large;\\\"> Description: {{item.description}}</p>\\r\\n     </ion-card-content>\\r\\n   </ion-card>\\r\\n  </div>\\r\\n  <ion-text class=\\\"centerText\\\" *ngIf=\\\"((userItems | async)?.cart).length <= 0\\\" color=\\\"primary\\\" style=\\\"text-align: center\\\">\\r\\n      <p>There are no items in the cart.</p>\\r\\n  </ion-text>  \\r\\n</ion-content>\\r\\n\\r\\n<ion-footer *ngIf=\\\"((userItems | async)?.cart).length > 0\\\" >\\r\\n  <!-- class=\\\"ion-no-border\\\" -->\\r\\n \\r\\n  <ion-toolbar *ngIf=\\\"userItems | async as cartData\\\"  position=\\\"bottom\\\" style=\\\"text-align: center;\\\">\\r\\n    <div class=\\\"ion-text-end\\\" id=\\\"subtotal\\\">\\r\\n      <ion-text > <p style=\\\"font-size: large;\\\"> Subtotal: ${{subtotal | number:'1.2-2'}} </p></ion-text> \\r\\n    </div>     \\r\\n    <ion-button (click)=\\\"checkOut(cartData.cart)\\\" size=\\\"large\\\">Checkout</ion-button>\\r\\n </ion-toolbar>\\r\\n</ion-footer>\\r\\n\";","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { Tab3Page } from './tab3.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: Tab3Page,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class Tab3PageRoutingModule {}\n","import { IonicModule } from '@ionic/angular';\r\nimport { RouterModule } from '@angular/router';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Tab3Page } from './tab3.page';\r\n\r\nimport { Tab3PageRoutingModule } from './tab3-routing.module'\r\n\r\n@NgModule({\r\n  imports: [\r\n    IonicModule,\r\n    CommonModule,\r\n    FormsModule,\r\n    RouterModule.forChild([{ path: '', component: Tab3Page }]),\r\n    Tab3PageRoutingModule,\r\n  ],\r\n  declarations: [Tab3Page]\r\n})\r\nexport class Tab3PageModule {}\r\n","export default \".large {\\n  font-size: 1500%;\\n}\\n\\n.centerText {\\n  height: 90% !important;\\n  display: flex !important;\\n  align-items: center !important;\\n  justify-content: center !important;\\n  align-content: center !important;\\n  flex-wrap: wrap !important;\\n}\\n\\n#subtotal {\\n  padding-right: 2%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdGFiMy90YWIzLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGdCQUFBO0FBQ0o7O0FBRUE7RUFDSSxzQkFBQTtFQUNBLHdCQUFBO0VBQ0EsOEJBQUE7RUFDQSxrQ0FBQTtFQUNBLGdDQUFBO0VBQ0EsMEJBQUE7QUFDSjs7QUFFQztFQUNHLGlCQUFBO0FBQ0oiLCJmaWxlIjoic3JjL2FwcC90YWIzL3RhYjMucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmxhcmdle1xyXG4gICAgZm9udC1zaXplOiAxNTAwJTtcclxufVxyXG5cclxuLmNlbnRlclRleHQge1xyXG4gICAgaGVpZ2h0OiA5MCUgIWltcG9ydGFudDtcclxuICAgIGRpc3BsYXk6IGZsZXggIWltcG9ydGFudDtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXIgIWltcG9ydGFudDtcclxuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyICFpbXBvcnRhbnQ7XHJcbiAgICBhbGlnbi1jb250ZW50OiBjZW50ZXIhaW1wb3J0YW50O1xyXG4gICAgZmxleC13cmFwOiB3cmFwICFpbXBvcnRhbnQ7ICAgIFxyXG4gfVxyXG5cclxuICNzdWJ0b3RhbHtcclxuICAgIHBhZGRpbmctcmlnaHQ6IDIlO1xyXG4gfVxyXG5cclxuIl19 */\";","import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { AngularFireAuth } from '@angular/fire/auth';\r\nimport { AlertController, NavController } from '@ionic/angular';\r\nimport * as firebase from 'firebase/app';\r\n\r\n@Component({\r\n  selector: 'app-tab3',\r\n  templateUrl: 'tab3.page.html',\r\n  styleUrls: ['tab3.page.scss']\r\n})\r\nexport class Tab3Page implements OnInit{\r\n  userUID;\r\n  userItems;\r\n  items;\r\n  cart = [];\r\n  listing;\r\n  name;\r\n  description;\r\n  location;\r\n  price;\r\n  quantity;\r\n  retailerType;\r\n  retailerUID;\r\n  date: Date;\r\n  subtotal = 0;\r\n  isReady = false;\r\n\r\n  constructor(public afauth: AngularFireAuth, private nacCtrl: NavController, public afstore: AngularFirestore, private changeDetection: ChangeDetectorRef, public alertCtrl: AlertController) {}\r\n\r\n  ngOnInit() { \r\n    var self = this\r\n    this.cart = []\r\n    this.subtotal = 0;\r\n    this.afauth.onAuthStateChanged(function(user) {        \r\n      if (user) {        \r\n        self.userUID = user.uid\r\n        self.items = self.afstore.doc(`users/${self.userUID}`);\r\n        self.userItems = self.items.valueChanges(); \r\n        self.changeDetection.detectChanges();   \r\n        self.getCart();    \r\n      }\r\n    });    \r\n  }\r\n\r\n  ionViewWillEnter(){\r\n    this.cart = []\r\n    this.subtotal = 0;\r\n    if(this.items){\r\n      this.userItems = this.items.valueChanges();\r\n      this.getCart();\r\n      this.changeDetection.detectChanges(); \r\n    }    \r\n  }\r\n\r\n  async getCart(){    \r\n    var self = this;\r\n    await this.afstore.doc(`users/${this.userUID}`).get().toPromise().then(function(querySnapshot) {\r\n      self.cart = []\r\n      self.subtotal = 0\r\n      var cart1 = querySnapshot.get(\"cart\");\r\n      self.changeDetection.detectChanges(); \r\n      cart1.forEach(element => {\r\n        self.cart.push(element);  \r\n        self.subtotal += element.totalPrice          \r\n        });            \r\n    })\r\n    .catch(function(error) {\r\n        console.log(\"Error getting documents\");\r\n    }); \r\n\r\n    this.changeDetection.detectChanges();  \r\n    this.isReady = true;   \r\n  }\r\n\r\n  async delete(item){\r\n\r\n    const confirm = await this.presentAlertDelete();\r\n    if (confirm) {\r\n    this.afstore.doc(`users/${this.userUID}`).update({\r\n      cart: firebase.firestore.FieldValue.arrayRemove({\r\n        name: item.name,\r\n        description: item.description,\r\n        listingID: item.listingID,\r\n        retailerUID: item.retailerUID,\r\n        quantity: item.quantity,\r\n        quantityCart: item.quantityCart,\r\n        price: item.price,\r\n        totalPrice: item.totalPrice\r\n      })\r\n    })\r\n    this.cart = this.cart.filter(currentListing => {\r\n      if (currentListing.listingID && item.listingID) {\r\n        return (!(currentListing.listingID.toLowerCase() === item.listingID.toLowerCase()));\r\n      }\r\n    }); \r\n    this.subtotal -= item.totalPrice; \r\n  }\r\n  }\r\n\r\n  async presentAlertDelete() : Promise<boolean> {\r\n    let resolveFunction: (confirm: boolean) => void;\r\n    const promise = new Promise<boolean>(resolve => {\r\n      resolveFunction = resolve;\r\n    });\r\n    const alert = await this.alertCtrl.create({\r\n      header: 'Confirm Delete',\r\n      message: 'Are you sure you want to delete this item from your cart?',\r\n      buttons: [\r\n        {\r\n          text: 'Yes',\r\n            handler: () => resolveFunction(true)\r\n        }, {\r\n          text: 'No',\r\n          handler: () => resolveFunction(false)\r\n        }\r\n      ]\r\n    });\r\n\r\n    await alert.present();\r\n    return promise;\r\n  }\r\n\r\n  inc(item){   \r\n    if(item.quantityCart + 1 <= item.quantity){\r\n\r\n      var quantityValue = item.quantityCart + 1; \r\n      var priceValue = item.totalPrice + item.price;\r\n\r\n      this.afstore.doc(`users/${this.userUID}`).update({\r\n        cart: firebase.firestore.FieldValue.arrayUnion({\r\n          name: item.name,\r\n          description: item.description,\r\n          listingID: item.listingID,\r\n          retailerUID: item.retailerUID,\r\n          quantity: item.quantity,\r\n          quantityCart: quantityValue,\r\n          price: item.price,\r\n          totalPrice: priceValue\r\n        })\r\n      })\r\n  \r\n      this.afstore.doc(`users/${this.userUID}`).update({\r\n        cart: firebase.firestore.FieldValue.arrayRemove({\r\n          name: item.name,\r\n          description: item.description,\r\n          listingID: item.listingID,\r\n          retailerUID: item.retailerUID,\r\n          quantity: item.quantity,\r\n          quantityCart: item.quantityCart,\r\n          price: item.price,\r\n          totalPrice: item.totalPrice\r\n        })\r\n      })\r\n      item.quantityCart++;\r\n      item.totalPrice += item.price;\r\n      this.subtotal += item.price;\r\n      \r\n    }  \r\n  }\r\n\r\n  dec(item){    \r\n    if(item.quantityCart - 1 > 0){\r\n      var quantityValue = item.quantityCart - 1;  \r\n      var priceValue = item.totalPrice - item.price;\r\n\r\n      this.afstore.doc(`users/${this.userUID}`).update({\r\n        cart: firebase.firestore.FieldValue.arrayUnion({\r\n          name: item.name,\r\n          description: item.description,\r\n          listingID: item.listingID,\r\n          retailerUID: item.retailerUID,\r\n          quantity: item.quantity,\r\n          quantityCart: quantityValue,\r\n          totalPrice: priceValue,\r\n          price: item.price\r\n        })\r\n      })\r\n  \r\n      this.afstore.doc(`users/${this.userUID}`).update({\r\n        cart: firebase.firestore.FieldValue.arrayRemove({\r\n          name: item.name,\r\n          description: item.description,\r\n          listingID: item.listingID,\r\n          retailerUID: item.retailerUID,\r\n          quantity: item.quantity,\r\n          quantityCart: item.quantityCart,\r\n          price: item.price,\r\n          totalPrice: item.totalPrice\r\n        })\r\n      })\r\n      item.quantityCart--;\r\n      item.totalPrice -= item.price;\r\n      this.subtotal -= item.price;\r\n    }\r\n  }\r\n\r\n  async checkOut(cart){\r\n    const confirm = await this.presentAlertCheck();\r\n    if (confirm) {\r\n      this.nacCtrl.navigateRoot(['./paypal']);\r\n    }   \r\n  }\r\n\r\n  public async presentAlertCheck() : Promise<boolean> {\r\n    let resolveFunction: (confirm: boolean) => void;\r\n    const promise = new Promise<boolean>(resolve => {\r\n      resolveFunction = resolve;\r\n    });\r\n    const alert = await this.alertCtrl.create({\r\n      header: 'Confirm Check-Out',\r\n      message: 'Are you sure you want to check out these items from your cart?',\r\n      buttons: [\r\n        {\r\n          text: 'Yes',\r\n            handler: () => resolveFunction(true)\r\n        }, {\r\n          text: 'No',\r\n          handler: () => resolveFunction(false)\r\n        }\r\n      ]\r\n    });\r\n\r\n    await alert.present();\r\n    return promise;\r\n  }\r\n}\r\n"]}