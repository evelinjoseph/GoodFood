{"version":3,"sources":["webpack:///src/app/tab1/tab1.page.html","webpack:///src/app/tab1/tab1-routing.module.ts","webpack:///src/app/tab1/tab1.module.ts","webpack:///src/app/tab1/tab1.page.scss","webpack:///src/app/tab1/tab1.page.ts"],"names":["routes","path","component","Tab1PageRoutingModule","imports","forChild","exports","Tab1PageModule","declarations","Tab1Page","listingService","afStorage","activatedRoute","nacCtrl","afAuth","firestore","changeDetection","loadingController","alertController","searchText","searchBy","isReady","presentLoading","initializeItems","listings","listing","retailers","getUsers","filter","currentListing","isRetailer","self","forEach","element","ind","array","ref","retailerUID","getDownloadURL","toPromise","then","url","retailerURL","error","storageRef","data","deleteDate","description","listingID","location","price","quantity","retailerType","listingsBackup","event","searchTerm","srcElement","value","detectChanges","matchingRetailers","retailer","name","toLowerCase","indexOf","length","i","presentAlertRadio","create","cssClass","header","inputs","type","label","checked","buttons","text","role","handler","alert","present","duration","translucent","backdropDismiss","loading","onDidDismiss","target","complete","uid","user","find","selector","template"],"mappings":"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","file":"tab1-tab1-module-es5.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar mode=\\\"ios\\\" color=\\\"primary\\\">\\r\\n    <ion-title>Good Food</ion-title>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-menu-button autoHide=\\\"false\\\"></ion-menu-button>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content fullscreen [hidden]=\\\"!isReady\\\"> \\r\\n\\r\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"doRefresh($event)\\\">\\r\\n    <ion-refresher-content></ion-refresher-content>\\r\\n  </ion-refresher>\\r\\n  \\r\\n  <br>\\r\\n  <ion-toolbar> \\r\\n    <ion-row>\\r\\n      <ion-col size=\\\"10\\\">\\r\\n      <ion-searchbar mode=\\\"ios\\\" (ionInput)=\\\"search($event)\\\" placeholder = {{searchText}}></ion-searchbar>\\r\\n    </ion-col>\\r\\n      <ion-col size=\\\"1\\\">\\r\\n      <ion-icon size=\\\"4\\\" name=\\\"options\\\" (click)=\\\"filterSearch()\\\"></ion-icon>\\r\\n    </ion-col>\\r\\n  </ion-row> \\r\\n    </ion-toolbar> \\r\\n    \\r\\n  <div *ngFor=\\\"let item of listings\\\">   \\r\\n    <ion-card [routerLink]=\\\"['/user-listing']\\\" [queryParams]=\\\"{ id: item.listingID }\\\" routerDirection=\\\"forward\\\">\\r\\n             \\r\\n        <img src={{item.url}} style=\\\"width:100%;\\\"> \\r\\n        <ion-card-header> \\r\\n          <ion-card-title class=\\\"ion-text-wrap\\\">{{getRetailer(item.retailerUID)}}</ion-card-title> \\r\\n        </ion-card-header>\\r\\n   \\r\\n     <ion-card-content> \\r\\n      <p style=\\\"font-weight: bold; color:black\\\"> {{item.quantity}} meals left</p>\\r\\n       <p> Price: ${{item.price | number:'1.2-2'}}</p>\\r\\n       <p> Location: {{item.location}}</p>\\r\\n       <p> Retailer Type: {{item.retailerType}}</p>\\r\\n     </ion-card-content>\\r\\n   </ion-card>\\r\\n  </div>\\r\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { Tab1Page } from './tab1.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: Tab1Page,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class Tab1PageRoutingModule {}\n","import { IonicModule } from '@ionic/angular';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Tab1Page } from './tab1.page';\r\n\r\nimport { Tab1PageRoutingModule } from './tab1-routing.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    IonicModule,\r\n    CommonModule,\r\n    FormsModule,\r\n    Tab1PageRoutingModule\r\n  ],\r\n  declarations: [Tab1Page]\r\n})\r\nexport class Tab1PageModule {}\r\n","export default \"ion-icon {\\n  font-size: 35px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdGFiMS90YWIxLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGVBQUE7QUFDSiIsImZpbGUiOiJzcmMvYXBwL3RhYjEvdGFiMS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24taWNvbiB7XHJcbiAgICBmb250LXNpemU6IDM1cHg7XHJcbn0iXX0= */\";","import { Component, OnInit, ChangeDetectorRef } from '@angular/core';\r\nimport { AngularFireAuth } from '@angular/fire/auth';\r\nimport { LoadingController, AlertController, NavController } from '@ionic/angular';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { AngularFireStorage } from '@angular/fire/storage';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { ListingsService} from '../listings.service';\r\n\r\n@Component({\r\n  selector: 'app-tab1',\r\n  templateUrl: 'tab1.page.html',\r\n  styleUrls: ['tab1.page.scss']\r\n})\r\nexport class Tab1Page implements OnInit{\r\n\r\n  public listings: any[];\r\n  public listingsBackup: any[];\r\n  deleteListings: any[];\r\n  searchText = \"Search By Retailer\";\r\n  searchBy = \"Retailer\";\r\n  dateNow;\r\n  url; \r\n  retailerUID;\r\n  ID;\r\n  isReady: Boolean = false;\r\n  retailers: any[];\r\n\r\n\r\n  constructor(public listingService: ListingsService, private afStorage: AngularFireStorage, private activatedRoute: ActivatedRoute, private nacCtrl: NavController, public afAuth: AngularFireAuth, private firestore: AngularFirestore, private changeDetection: ChangeDetectorRef, public loadingController: LoadingController, public alertController: AlertController) {}\r\n\r\n\r\n  async ngOnInit() {\r\n    this.presentLoading(); \r\n    this.listings = await this.initializeItems();\r\n    \r\n  }\r\n\r\nasync initializeItems(): Promise<any> {\r\n  let listing: any[] = await this.listingService.initializeItems();  \r\n  this.retailers = this.listingService.getUsers().filter(currentListing => {\r\n    if (currentListing.isRetailer) {\r\n      return (currentListing.isRetailer);\r\n    }\r\n  });  \r\n  var self = this;\r\n  listing.forEach(async function(element, ind, array) { \r\n  var retailerURL;\r\n    var storageRef =  await self.afStorage.ref(`images/${element.retailerUID}`).getDownloadURL().toPromise().then(function(url) {\r\n      retailerURL = url;\r\n   }).catch(function(error) {\r\n     retailerURL = 'assets/images/default.png';\r\n   });\r\n    const data = {\r\n      deleteDate: element.deleteDate,\r\n      description: element.description,\r\n      listingID: element.listingID,\r\n      location: element.location,\r\n      price: element.price,\r\n      quantity: element.quantity,\r\n      retailerType: element.retailerType,     \r\n      retailerUID: element.retailerUID,\r\n      url: retailerURL      \r\n    }   \r\n    array[ind] = data \r\n  });\r\n\r\n  this.listingsBackup = listing;  \r\n  return listing;\r\n}\r\n\r\n  search(event){\r\n    this.listings = this.listingsBackup;\r\n    const searchTerm = event.srcElement.value;\r\n\r\n    if(!searchTerm){\r\n      this.changeDetection.detectChanges(); \r\n      return;\r\n    }\r\n\r\n    if(this.searchBy == \"Retailer\"){\r\n      let matchingRetailers = [];\r\n      matchingRetailers = this.retailers.filter(retailer => {\r\n        return (retailer.name.toLowerCase().indexOf(searchTerm.toLowerCase()) > -1);\r\n      });     \r\n      \r\n        this.listings = this.listings.filter(currentListing => {\r\n          if(matchingRetailers.length>0 && currentListing.retailerUID){\r\n            for(var i = 0; i<matchingRetailers.length; i++){\r\n              if(currentListing.retailerUID.toLowerCase().indexOf(matchingRetailers[i].retailerUID.toLowerCase())> -1){\r\n                return true;\r\n              }\r\n            } \r\n          }                         \r\n          \r\n        });\r\n      \r\n    }\r\n\r\n    else if(this.searchBy == \"Location\"){\r\n      this.listings = this.listings.filter(currentListing => {\r\n        if (currentListing.location && searchTerm) {\r\n          return (currentListing.location.toLowerCase().indexOf(searchTerm.toLowerCase()) > -1);\r\n        }\r\n      });\r\n    }\r\n\r\n    else if(this.searchBy == \"Retailer Type\"){\r\n      this.listings = this.listings.filter(currentListing => {\r\n        if (currentListing.retailerType && searchTerm) {\r\n          return (currentListing.retailerType.toLowerCase().indexOf(searchTerm.toLowerCase()) > -1);\r\n        }\r\n      });\r\n    }     \r\n    this.changeDetection.detectChanges(); \r\n  }\r\n\r\n  filterSearch(){\r\n    this.presentAlertRadio();\r\n    this.changeDetection.detectChanges(); \r\n  }\r\n\r\n  async presentAlertRadio() {\r\n    const alert = await this.alertController.create({\r\n      cssClass: 'my-custom-class',\r\n      header: 'Search By:',\r\n      inputs: [\r\n        {\r\n          name: 'radio1',\r\n          type: 'radio',\r\n          label: 'Retailer',\r\n          value: 'Retailer',\r\n          checked: true \r\n        },\r\n        {\r\n          name: 'radio2',\r\n          type: 'radio',\r\n          label: 'Retailer Type',\r\n          value: 'Retailer Type'\r\n        },\r\n        {\r\n          name: 'radio3',\r\n          type: 'radio',\r\n          label: 'Location',\r\n          value: 'Location'\r\n        }\r\n      ],\r\n      buttons: [\r\n        {\r\n          text: 'Cancel',\r\n          role: 'cancel',\r\n          cssClass: 'secondary',\r\n          handler: () => {\r\n          }\r\n        }, {\r\n          text: 'OK',\r\n          handler: (data:string) => {\r\n            this.searchText = \"Search By \" + data;\r\n            this.searchBy = data;\r\n            \r\n          }\r\n        }\r\n      ]\r\n    });\r\n\r\n    await alert.present();\r\n  }\r\n\r\n  async presentLoading() {\r\n    const loading = await this.loadingController.create({\r\n      duration: 700,\r\n      translucent: true,\r\n      cssClass: 'transparent',\r\n      backdropDismiss: false\r\n    });\r\n    await loading.present();\r\n\r\n    const { role, data } = await loading.onDidDismiss();\r\n    this.isReady = true; \r\n    this.changeDetection.detectChanges(); \r\n  }\r\n\r\n  async doRefresh(event) {\r\n    // this.isReady = false;\r\n    // this.presentLoading();\r\n    this.listings = await this.initializeItems();    \r\n    event.target.complete();\r\n  }\r\n\r\n  \r\n    getRetailer(uid) : String{  \r\n      if(this.retailers){\r\n       const user = this.retailers.find(element => element.retailerUID == uid);    \r\n       return user.name;\r\n \r\n      }\r\n    }\r\n\r\n  \r\n\r\n}"]}