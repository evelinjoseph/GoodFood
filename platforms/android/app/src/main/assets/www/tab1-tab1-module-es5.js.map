{"version":3,"sources":["webpack:///src/app/tab1/tab1.page.html","webpack:///src/app/tab1/tab1-routing.module.ts","webpack:///src/app/tab1/tab1.module.ts","webpack:///src/app/tab1/tab1.page.scss","webpack:///src/app/tab1/tab1.page.ts"],"names":["routes","path","component","Tab1PageRoutingModule","imports","forChild","exports","Tab1PageModule","declarations","Tab1Page","listingService","afStorage","activatedRoute","nacCtrl","afAuth","firestore","changeDetection","loadingController","alertController","searchText","searchBy","isReady","presentLoading","initializeItems","listings","listing","self","forEach","element","ind","array","ref","retailerUID","getDownloadURL","toPromise","then","url","retailerURL","error","storageRef","data","deleteDate","description","listingID","location","name","price","quantity","retailerType","listingsBackup","event","searchTerm","srcElement","value","detectChanges","filter","currentListing","toLowerCase","indexOf","presentAlertRadio","create","cssClass","header","inputs","type","label","checked","buttons","text","role","handler","alert","present","duration","translucent","backdropDismiss","loading","onDidDismiss","target","complete","selector","template"],"mappings":"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","file":"tab1-tab1-module-es5.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar mode=\\\"ios\\\" color=\\\"primary\\\">\\r\\n    <ion-title>Good Food</ion-title>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-menu-button autoHide=\\\"false\\\"></ion-menu-button>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content fullscreen [hidden]=\\\"!isReady\\\"> \\r\\n\\r\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"doRefresh($event)\\\">\\r\\n    <ion-refresher-content></ion-refresher-content>\\r\\n  </ion-refresher>\\r\\n  \\r\\n  <br>\\r\\n  <ion-toolbar> \\r\\n    <ion-row>\\r\\n      <ion-col size=\\\"10\\\">\\r\\n      <ion-searchbar mode=\\\"ios\\\" (ionInput)=\\\"search($event)\\\" placeholder = {{searchText}}></ion-searchbar>\\r\\n    </ion-col>\\r\\n      <ion-col size=\\\"1\\\">\\r\\n      <ion-icon size=\\\"4\\\" name=\\\"options\\\" (click)=\\\"filterSearch()\\\"></ion-icon>\\r\\n    </ion-col>\\r\\n  </ion-row> \\r\\n    </ion-toolbar> \\r\\n    <!-- \\r\\n    <ion-item>\\r\\n      <ion-range id=\\\"dual-range\\\" dual-knobs pin color=\\\"primary\\\" [(ngModel)]=\\\"dualValue2\\\" min=\\\"0\\\" max=\\\"100\\\" step=\\\"1\\\" snaps=\\\"true\\\">\\r\\n        <ion-label slot=\\\"start\\\" >0</ion-label>\\r\\n        <ion-label slot=\\\"end\\\">100</ion-label>\\r\\n      </ion-range>\\r\\n    </ion-item> -->\\r\\n  <div *ngFor=\\\"let item of listings\\\">   \\r\\n    <ion-card [routerLink]=\\\"['/user-listing']\\\" [queryParams]=\\\"{ id: item.listingID }\\\" routerDirection=\\\"forward\\\">\\r\\n     <!-- <ion-item> \\r\\n       <ion-icon name=\\\"restaurant\\\" slot=\\\"start\\\"></ion-icon>\\r\\n       <ion-label class=\\\"ion-text-wrap\\\">{{item.name}}</ion-label>   \\r\\n      </ion-item> \\r\\n       <ion-card> -->\\r\\n        <!-- <img src=\\\"./madison.jpg\\\" /> -->\\r\\n        \\r\\n        <img src={{item.url}} style=\\\"width:100%;\\\"> \\r\\n        <ion-card-header> \\r\\n          <ion-card-title class=\\\"ion-text-wrap\\\">{{item.name}}</ion-card-title>\\r\\n        </ion-card-header>\\r\\n   \\r\\n     <ion-card-content> \\r\\n     \\r\\n       <p> Price: ${{item.price | number:'1.2-2'}}</p>\\r\\n       <p> Description: {{item.description}}</p>\\r\\n       <p> Location: {{item.location}}</p>\\r\\n       <p> Retailer Type: {{item.retailerType}}</p>\\r\\n     </ion-card-content>\\r\\n   </ion-card>\\r\\n  </div>\\r\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { Tab1Page } from './tab1.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: Tab1Page,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class Tab1PageRoutingModule {}\n","import { IonicModule } from '@ionic/angular';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Tab1Page } from './tab1.page';\n\nimport { Tab1PageRoutingModule } from './tab1-routing.module';\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    Tab1PageRoutingModule\n  ],\n  declarations: [Tab1Page]\n})\nexport class Tab1PageModule {}\n","export default \"ion-icon {\\n  font-size: 35px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdGFiMS90YWIxLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGVBQUE7QUFDSiIsImZpbGUiOiJzcmMvYXBwL3RhYjEvdGFiMS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24taWNvbiB7XHJcbiAgICBmb250LXNpemU6IDM1cHg7XHJcbn0iXX0= */\";","import { Component, OnInit, ChangeDetectorRef } from '@angular/core';\r\nimport { AngularFireAuth } from '@angular/fire/auth';\r\nimport { LoadingController, AlertController, NavController } from '@ionic/angular';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { first } from 'rxjs/operators';\r\nimport { AngularFireStorage } from '@angular/fire/storage';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { ListingsService} from '../listings.service';\r\n\r\n@Component({\r\n  selector: 'app-tab1',\r\n  templateUrl: 'tab1.page.html',\r\n  styleUrls: ['tab1.page.scss']\r\n})\r\nexport class Tab1Page implements OnInit{\r\n\r\n  public listings: any[];\r\n  public listingsBackup: any[];\r\n  deleteListings: any[];\r\n  searchText = \"Search By Food\";\r\n  searchBy = \"Food\";\r\n  dateNow;\r\n  url; \r\n  retailerUID;\r\n  ID;\r\n  isReady: Boolean = false;\r\n\r\n\r\n  constructor(public listingService: ListingsService, private afStorage: AngularFireStorage, private activatedRoute: ActivatedRoute, private nacCtrl: NavController, public afAuth: AngularFireAuth, private firestore: AngularFirestore, private changeDetection: ChangeDetectorRef, public loadingController: LoadingController, public alertController: AlertController) {}\r\n\r\n\r\n  async ngOnInit() {\r\n    this.presentLoading(); \r\n    this.listings = await this.initializeItems();\r\n    \r\n}\r\n\r\n\r\nasync initializeItems(): Promise<any> {\r\n  let listing: any[] = await this.listingService.initializeItems();  \r\n\r\n  var self = this;\r\n  listing.forEach(async function(element, ind, array) { \r\n  var retailerURL;\r\n    var storageRef =  await self.afStorage.ref(`images/${element.retailerUID}`).getDownloadURL().toPromise().then(function(url) {\r\n      retailerURL = url;\r\n   }).catch(function(error) {\r\n     retailerURL = 'assets/images/default.png';\r\n   });\r\n    const data = {\r\n      deleteDate: element.deleteDate,\r\n      description: element.description,\r\n      listingID: element.listingID,\r\n      location: element.location,\r\n      name: element.name,\r\n      price: element.price,\r\n      quantity: element.quantity,\r\n      retailerType: element.retailerType,     \r\n      retailerUID: element.retailerUID,\r\n      url: retailerURL      \r\n    }   \r\n    array[ind] = data \r\n  });\r\n\r\n  this.listingsBackup = listing;  \r\n  return listing;\r\n}\r\n\r\n \r\n\r\n  search(event){\r\n    this.listings = this.listingsBackup;\r\n    const searchTerm = event.srcElement.value;\r\n\r\n    if(!searchTerm){\r\n      this.changeDetection.detectChanges(); \r\n      return;\r\n    }\r\n\r\n    if(this.searchBy == \"Food\"){\r\n      this.listings = this.listings.filter(currentListing => {\r\n        if (currentListing.name && searchTerm) {\r\n          return (currentListing.name.toLowerCase().indexOf(searchTerm.toLowerCase()) > -1);\r\n        }\r\n      });  \r\n    }\r\n\r\n    else if(this.searchBy == \"Location\"){\r\n      this.listings = this.listings.filter(currentListing => {\r\n        if (currentListing.location && searchTerm) {\r\n          return (currentListing.location.toLowerCase().indexOf(searchTerm.toLowerCase()) > -1);\r\n        }\r\n      });\r\n    }\r\n\r\n    else if(this.searchBy == \"Retailer\"){\r\n      this.listings = this.listings.filter(currentListing => {\r\n        if (currentListing.retailerType && searchTerm) {\r\n          return (currentListing.retailerType.toLowerCase().indexOf(searchTerm.toLowerCase()) > -1);\r\n        }\r\n      });\r\n    }     \r\n    this.changeDetection.detectChanges(); \r\n  }\r\n\r\n  filterSearch(){\r\n    this.presentAlertRadio();\r\n    this.changeDetection.detectChanges(); \r\n  }\r\n\r\n  async presentAlertRadio() {\r\n    const alert = await this.alertController.create({\r\n      cssClass: 'my-custom-class',\r\n      header: 'Search By:',\r\n      inputs: [\r\n        {\r\n          name: 'radio1',\r\n          type: 'radio',\r\n          label: 'Food',\r\n          value: 'Food',\r\n          checked: true\r\n        },\r\n        {\r\n          name: 'radio2',\r\n          type: 'radio',\r\n          label: 'Retailer',\r\n          value: 'Retailer'\r\n        },\r\n        {\r\n          name: 'radio3',\r\n          type: 'radio',\r\n          label: 'Location',\r\n          value: 'Location'\r\n        }\r\n      ],\r\n      buttons: [\r\n        {\r\n          text: 'Cancel',\r\n          role: 'cancel',\r\n          cssClass: 'secondary',\r\n          handler: () => {\r\n          }\r\n        }, {\r\n          text: 'OK',\r\n          handler: (data:string) => {\r\n            this.searchText = \"Search By \" + data;\r\n            this.searchBy = data;\r\n            \r\n          }\r\n        }\r\n      ]\r\n    });\r\n\r\n    await alert.present();\r\n  }\r\n\r\n  async presentLoading() {\r\n    const loading = await this.loadingController.create({\r\n      duration: 700,\r\n      translucent: true,\r\n      cssClass: 'transparent',\r\n      backdropDismiss: false\r\n    });\r\n    await loading.present();\r\n\r\n    const { role, data } = await loading.onDidDismiss();\r\n    this.isReady = true; \r\n    this.changeDetection.detectChanges(); \r\n  }\r\n\r\n  async doRefresh(event) {\r\n    this.listings = await this.initializeItems();    \r\n    event.target.complete();\r\n  }\r\n\r\n}"]}