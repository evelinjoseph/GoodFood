{"version":3,"sources":["webpack:///node_modules/ez-guid/dist/guid.js","webpack:///src/app/new-listing/new-listing.page.html","webpack:///src/app/new-listing/new-listing-routing.module.ts","webpack:///src/app/new-listing/new-listing.module.ts","webpack:///src/app/new-listing/new-listing.page.scss","webpack:///src/app/new-listing/new-listing.page.ts"],"names":["exports","__esModule","Guid","guid","value","EMPTY","isValid","toLowerCase","indexOf","length","tempGuid","pos","_i","_a","i","substr","random","TypeError","toString","validator","test","create","createEmpty","gen","count","out","Math","substring","join","prototype","equals","other","isEmpty","toShortString","replace","RegExp","routes","path","component","NewListingPageRoutingModule","imports","forChild","NewListingPageModule","declarations","NewListingPage","afstore","alertController","activatedRoute","firestore","afStorage","afAuth","loadingController","changeDetection","name","description","price","quantity","self","onAuthStateChanged","user","retailerUID","uid","collection","doc","get","toPromise","userRef","data","retailerType","location","pickupTime","detectChanges","Error","listingID","update","listings","FieldValue","arrayUnion","isListed","presentAlert","error","presentError","message","date","Date","pickupDate","toDate","deleteDate","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","set","promise","Promise","resolve","resolveFunction","header","buttons","text","handler","alert","present","errorMessage","selector","template"],"mappings":"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","file":"new-listing-new-listing-module-es5.js","sourcesContent":["\"use strict\";\nexports.__esModule = true;\nvar Guid = /** @class */ (function () {\n    function Guid(guid) {\n        /** Container for the GUID itself (in the hyphenated format). */\n        this.value = Guid.EMPTY;\n        if (guid && Guid.isValid(guid)) { //hyphenated, no conversion necessary\n            this.value = guid.toLowerCase();\n        }\n        else if (guid && !(guid.indexOf(\"-\") >= 0) && guid.length == 32) { //non-hyphenated\n            var tempGuid = \"\";\n            var pos = 0;\n            for (var _i = 0, _a = [8, 4, 4, 4, 12]; _i < _a.length; _i++) {\n                var i = _a[_i];\n                if (pos != 0)\n                    tempGuid += \"-\";\n                tempGuid += guid.substr(pos, i).toLowerCase();\n                pos += i;\n            }\n            this.value = tempGuid;\n        }\n        else if (!guid) {\n            this.value = Guid.random();\n        }\n        else\n            throw new TypeError(\"No valid GUID string given; cannot instantiate!\");\n    }\n    Guid.isValid = function (guid) {\n        var value = guid.toString();\n        return guid && (guid instanceof Guid || this.validator.test(value));\n    };\n    Guid.create = function (guid) {\n        if (!guid)\n            guid = this.random();\n        return new Guid(guid);\n    };\n    /** Generates an empty, hyphenated GUID object. */\n    Guid.createEmpty = function () {\n        return new Guid(this.EMPTY);\n    };\n    Guid.gen = function (count) {\n        var out = \"\";\n        for (var i = 0; i < count; i++) {\n            // tslint:disable-next-line:no-bitwise\n            out += (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1).toLowerCase();\n        }\n        return out;\n    };\n    /** Generates a random, hyphenated GUID string. */\n    Guid.random = function () {\n        return [Guid.gen(2), Guid.gen(1), Guid.gen(1), Guid.gen(1), Guid.gen(3)].join(\"-\");\n    };\n    /** Compares one Guid instance with another */\n    Guid.prototype.equals = function (other) {\n        return Guid.isValid(other) && this.value === other.toString();\n    };\n    Guid.prototype.isEmpty = function () {\n        return this.value === Guid.EMPTY;\n    };\n    /** Returns the hyphenated GUID */\n    Guid.prototype.toString = function () {\n        return this.value;\n    };\n    /** Returns the non-hyphenated GUID */\n    Guid.prototype.toShortString = function () {\n        return this.value.replace(/-/g, \"\");\n    };\n    /** Empty GUID string (hyphenated). */\n    Guid.EMPTY = \"00000000-0000-0000-0000-000000000000\";\n    Guid.validator = new RegExp(\"^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$\", \"i\");\n    return Guid;\n}());\nexports.Guid = Guid;\n","export default \"<ion-header style=\\\"text-align: center\\\">\\r\\n  <ion-toolbar color=\\\"primary\\\" mode=\\\"ios\\\">\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button [text]=\\\"Back\\\" defaultHref=\\\"/retailertabs/retailertabs/retailertab2\\\"></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>\\r\\n      Good Food\\r\\n    </ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content fullscreen>\\r\\n      <br>\\r\\n      <p style=\\\"text-align: center;\\\" > Please Enter a Name, Description, Price, and Quantity for the New Listing </p>\\r\\n        <ion-item>\\r\\n          <ion-label position=\\\"floating\\\">Name</ion-label>\\r\\n          <ion-input autocapitalize='sentences' type=\\\"text\\\" [(ngModel)]=\\\"name\\\"></ion-input>\\r\\n        </ion-item>\\r\\n        <ion-item>\\r\\n          <ion-label position=\\\"floating\\\">Description</ion-label>\\r\\n          <ion-input [(ngModel)]=\\\"description\\\"></ion-input>\\r\\n        </ion-item>\\r\\n        <ion-item>\\r\\n          <ion-label position=\\\"floating\\\">Price</ion-label>\\r\\n          <ion-input type=\\\"number\\\" [(ngModel)]=\\\"price\\\"></ion-input>\\r\\n        </ion-item>\\r\\n        <ion-item>\\r\\n          <ion-label position=\\\"floating\\\">Quantity</ion-label>\\r\\n          <ion-input type=\\\"number\\\" [(ngModel)]=\\\"quantity\\\"></ion-input>\\r\\n        </ion-item>\\r\\n        <br>\\r\\n        <ion-footer class=\\\"ion-no-border\\\">\\r\\n          <ion-toolbar position=\\\"bottom\\\" style=\\\"text-align: center;\\\">     \\r\\n            <ion-button onmouseover=\\\"\\\" (click)=\\\"save()\\\">Add Listing\\r\\n              <span></span>\\r\\n            </ion-button> \\r\\n            <ion-button (click)=\\\"publish()\\\">Add and Publish Listing</ion-button> \\r\\n          </ion-toolbar>\\r\\n        </ion-footer>\\r\\n        \\r\\n</ion-content>\\r\\n\\r\\n\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { NewListingPage } from './new-listing.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: NewListingPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class NewListingPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { NewListingPageRoutingModule } from './new-listing-routing.module';\r\n\r\nimport { NewListingPage } from './new-listing.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    NewListingPageRoutingModule\r\n  ],\r\n  declarations: [NewListingPage]\r\n})\r\nexport class NewListingPageModule {}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL25ldy1saXN0aW5nL25ldy1saXN0aW5nLnBhZ2Uuc2NzcyJ9 */\";","\r\nimport { ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { AngularFireStorage } from '@angular/fire/storage';\r\nimport { AngularFireAuth } from '@angular/fire/auth';\r\nimport * as firebase from 'firebase/app';\r\nimport { LoadingController } from '@ionic/angular';\r\nimport { AlertController } from '@ionic/angular';\r\nimport { Guid } from \"ez-guid\";\r\n\r\n@Component({\r\n  selector: 'app-new-listing',\r\n  templateUrl: './new-listing.page.html',\r\n  styleUrls: ['./new-listing.page.scss'],\r\n})\r\nexport class NewListingPage implements OnInit {\r\n\r\n  retailerType;\r\n  location;\r\n  retailerUID;\r\n  name: String = \"\";\r\n  description: String = \"\";\r\n  price: Number = 0;\r\n  quantity: Number = 0;  \r\n  listingID;\r\n  pickupTime;\r\n  date;\r\n  pickupDate: Date;\r\n  \r\n  constructor(public afstore: AngularFirestore, public alertController: AlertController, private activatedRoute: ActivatedRoute, private firestore: AngularFirestore, private afStorage: AngularFireStorage, public afAuth: AngularFireAuth, public loadingController: LoadingController, private changeDetection: ChangeDetectorRef) { }\r\n  \r\n  ngOnInit() {\r\n      var self = this\r\n      this.afAuth.onAuthStateChanged(async function(user) {        \r\n        if (user) {        \r\n          self.retailerUID = user.uid;\r\n          var userRef = (await self.afstore.collection(\"users\").doc(self.retailerUID).get().toPromise()).data()\r\n          self.retailerType = userRef.retailerType;\r\n          self.location = userRef.location; \r\n          self.pickupTime = userRef.pickupTime;\r\n          self.changeDetection.detectChanges(); \r\n        }\r\n      });\r\n    };\r\n    \r\n   \r\nsave()\r\n  {    \r\n    try{\r\n      \r\n      if(this.name.length==0){\r\n        throw new Error('Please Enter a Name');\r\n      }  \r\n      if(this.description.length==0){\r\n        throw new Error('Please Enter a Description');\r\n      } \r\n      if(this.price<=0){\r\n        throw new Error('Please Enter Price');\r\n      } \r\n      if(this.quantity<=0){\r\n        throw new Error('Please Enter Quantity');\r\n      }\r\n\r\n      //TODO: make error checks better\r\n      \r\n    this.listingID = Guid.create().toShortString();\r\n    this.afstore.doc(`users/${this.retailerUID}`).update({\r\n      listings: firebase.firestore.FieldValue.arrayUnion({\r\n        quantity: this.quantity,\r\n        price: this.price,\r\n        description: this.description,\r\n        name: this.name,\r\n        listingID: this.listingID,\r\n        isListed: false      \r\n      })\r\n    })\r\n\r\n    this.presentAlert(\"Listing Added Successfully\");\r\n    \r\n  }\r\n  catch(error){\r\n    this.presentError(error.message);\r\n  }\r\n    \r\n  }\r\n\r\n  publish()\r\n  {    \r\n    try{\r\n      \r\n      if(this.name.length==0){\r\n        throw new Error('Please Enter a Name');\r\n      }  \r\n      if(this.description.length==0){\r\n        throw new Error('Please Enter a Description');\r\n      } \r\n      if(this.price==0){\r\n        throw new Error('Please Enter Price');\r\n      } \r\n      if(this.quantity==0){\r\n        throw new Error('Please Enter Quantity');\r\n      }\r\n\r\n      //TODO: make error checks better\r\n      this.listingID = Guid.create().toShortString();\r\n      this.date = new Date();\r\n      this.pickupDate = new Date(this.pickupTime.toDate());\r\n      \r\n\r\n      // TODO: if adding after the pickuptime then increase the date to tomorrow (add one to todays date)\r\n      \r\n      const data = {\r\n        description: this.description,\r\n        listingID: this.listingID,\r\n        name: this.name,\r\n        price: this.price,\r\n        quantity: this.quantity,\r\n        retailerType: this.retailerType,\r\n        location: this.location,\r\n        retailerUID: this.retailerUID,\r\n        deleteDate: new Date(this.date.getFullYear(), this.date.getMonth(), this.date.getDate(), this.pickupDate.getHours(), this.pickupDate.getMinutes(), this.pickupDate.getSeconds(), this.pickupDate.getMilliseconds())\r\n      }     \r\n  \r\n      this.afstore.collection(\"listings\").doc(this.listingID).set(data)    \r\n    \r\n      this.afstore.doc(`users/${this.retailerUID}`).update({\r\n        listings: firebase.firestore.FieldValue.arrayUnion({\r\n          quantity: this.quantity,\r\n          price: this.price,\r\n          description: this.description,\r\n          name: this.name,\r\n          listingID: this.listingID,\r\n          isListed: true      \r\n        })\r\n      })\r\n\r\n    this.presentAlert(\"Listing Added and Published Successfully\");\r\n    \r\n  }\r\n  catch(error){\r\n    this.presentError(error.message);\r\n  }\r\n    \r\n  }\r\n\r\n  public async presentAlert(message) : Promise<boolean> {\r\n      let resolveFunction: (confirm: boolean) => void;\r\n      const promise = new Promise<boolean>(resolve => {\r\n        resolveFunction = resolve;\r\n      });\r\n      \r\n      const alert = await this.alertController.create({\r\n        header: message,\r\n        buttons: [\r\n          {\r\n            text: 'OK',\r\n              handler: () => resolveFunction(true)\r\n          }\r\n        ]\r\n      });\r\n  \r\n      await alert.present();\r\n      return promise;\r\n    }\r\n\r\n    public async presentError(errorMessage) : Promise<boolean> {\r\n      let resolveFunction: (confirm: boolean) => void;\r\n      const promise = new Promise<boolean>(resolve => {\r\n        resolveFunction = resolve;\r\n      });\r\n      \r\n      const alert = await this.alertController.create({\r\n        header: 'New Listing Error',\r\n        message: errorMessage,\r\n        buttons: [\r\n          {\r\n            text: 'OK',\r\n              handler: () => resolveFunction(true)\r\n          }\r\n        ]\r\n      });\r\n    \r\n      await alert.present();\r\n      return promise;\r\n    }\r\n}\r\n"]}