{"version":3,"sources":["./src/app/tab1/tab1.page.html","./src/app/tab1/tab1-routing.module.ts","./src/app/tab1/tab1.module.ts","./src/app/tab1/tab1.page.scss","./src/app/tab1/tab1.page.ts"],"names":[],"mappings":"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","file":"tab1-tab1-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar mode=\\\"ios\\\" color=\\\"primary\\\">\\n    <ion-title>Good Food</ion-title>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button autoHide=\\\"false\\\"></ion-menu-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content fullscreen [hidden]=\\\"!isReady\\\"> \\n\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"doRefresh($event)\\\">\\n    <ion-refresher-content></ion-refresher-content>\\n  </ion-refresher>\\n  \\n  <br>\\n  <ion-toolbar> \\n    <ion-row>\\n      <ion-col size=\\\"10\\\">\\n      <ion-searchbar mode=\\\"ios\\\" (ionInput)=\\\"search($event)\\\" placeholder = {{searchText}}></ion-searchbar>\\n    </ion-col>\\n      <ion-col size=\\\"1\\\">\\n      <ion-icon size=\\\"4\\\" name=\\\"options\\\" (click)=\\\"filterSearch()\\\"></ion-icon>\\n    </ion-col>\\n  </ion-row> \\n    </ion-toolbar> \\n    \\n  <div *ngFor=\\\"let item of listings\\\">   \\n    <ion-card [routerLink]=\\\"['/user-listing']\\\" [queryParams]=\\\"{ id: item.listingID }\\\" routerDirection=\\\"forward\\\">\\n             \\n        <img src={{item.url}} style=\\\"width:100%;\\\"> \\n        <ion-card-header> \\n          <ion-card-title class=\\\"ion-text-wrap\\\">{{getRetailer(item.retailerUID)}}</ion-card-title> \\n        </ion-card-header>\\n   \\n     <ion-card-content> \\n      <p style=\\\"font-weight: bold; color:black\\\"> {{item.quantity}} meals left</p>\\n       <p> Price: ${{item.price | number:'1.2-2'}}</p>\\n       <p> Location: {{item.location}}</p>\\n       <p> Retailer Type: {{item.retailerType}}</p>\\n     </ion-card-content>\\n   </ion-card>\\n  </div>\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { Tab1Page } from './tab1.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: Tab1Page,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class Tab1PageRoutingModule {}\n","import { IonicModule } from '@ionic/angular';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Tab1Page } from './tab1.page';\n\nimport { Tab1PageRoutingModule } from './tab1-routing.module';\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    Tab1PageRoutingModule\n  ],\n  declarations: [Tab1Page]\n})\nexport class Tab1PageModule {}\n","export default \"ion-icon {\\n  font-size: 35px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdGFiMS90YWIxLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGVBQUE7QUFDSiIsImZpbGUiOiJzcmMvYXBwL3RhYjEvdGFiMS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24taWNvbiB7XG4gICAgZm9udC1zaXplOiAzNXB4O1xufSJdfQ== */\";","import { Component, OnInit, ChangeDetectorRef } from '@angular/core';\nimport { AngularFireAuth } from '@angular/fire/auth';\nimport { LoadingController, AlertController, NavController } from '@ionic/angular';\nimport { AngularFirestore } from '@angular/fire/firestore';\nimport { AngularFireStorage } from '@angular/fire/storage';\nimport { ActivatedRoute } from '@angular/router';\nimport { ListingsService} from '../listings.service';\n\n@Component({\n  selector: 'app-tab1',\n  templateUrl: 'tab1.page.html',\n  styleUrls: ['tab1.page.scss']\n})\nexport class Tab1Page implements OnInit{\n\n  public listings: any[];\n  public listingsBackup: any[];\n  deleteListings: any[];\n  searchText = \"Search By Retailer\";\n  searchBy = \"Retailer\";\n  dateNow;\n  url; \n  retailerUID;\n  ID;\n  isReady: Boolean = false;\n  retailers: any[];\n\n\n  constructor(public listingService: ListingsService, private afStorage: AngularFireStorage, private activatedRoute: ActivatedRoute, private nacCtrl: NavController, public afAuth: AngularFireAuth, private firestore: AngularFirestore, private changeDetection: ChangeDetectorRef, public loadingController: LoadingController, public alertController: AlertController) {}\n\n\n  async ngOnInit() {\n    this.presentLoading(); \n    this.listings = await this.initializeItems();\n    \n  }\n\nasync initializeItems(): Promise<any> {\n  let listing: any[] = await this.listingService.initializeItems();  \n  this.retailers = this.listingService.getUsers().filter(currentListing => {\n    if (currentListing.isRetailer) {\n      return (currentListing.isRetailer);\n    }\n  });  \n  var self = this;\n  listing.forEach(async function(element, ind, array) { \n  var retailerURL;\n    var storageRef =  await self.afStorage.ref(`images/${element.retailerUID}`).getDownloadURL().toPromise().then(function(url) {\n      retailerURL = url;\n   }).catch(function(error) {\n     retailerURL = 'assets/images/default.png';\n   });\n    const data = {\n      deleteDate: element.deleteDate,\n      description: element.description,\n      listingID: element.listingID,\n      location: element.location,\n      price: element.price,\n      quantity: element.quantity,\n      retailerType: element.retailerType,     \n      retailerUID: element.retailerUID,\n      url: retailerURL      \n    }   \n    array[ind] = data \n  });\n\n  this.listingsBackup = listing;  \n  return listing;\n}\n\n  search(event){\n    this.listings = this.listingsBackup;\n    const searchTerm = event.srcElement.value;\n\n    if(!searchTerm){\n      this.changeDetection.detectChanges(); \n      return;\n    }\n\n    if(this.searchBy == \"Retailer\"){\n      let matchingRetailers = [];\n      matchingRetailers = this.retailers.filter(retailer => {\n        return (retailer.name.toLowerCase().indexOf(searchTerm.toLowerCase()) > -1);\n      });     \n      \n        this.listings = this.listings.filter(currentListing => {\n          if(matchingRetailers.length>0 && currentListing.retailerUID){\n            for(var i = 0; i<matchingRetailers.length; i++){\n              if(currentListing.retailerUID.toLowerCase().indexOf(matchingRetailers[i].retailerUID.toLowerCase())> -1){\n                return true;\n              }\n            } \n          }                         \n          \n        });\n      \n    }\n\n    else if(this.searchBy == \"Location\"){\n      this.listings = this.listings.filter(currentListing => {\n        if (currentListing.location && searchTerm) {\n          return (currentListing.location.toLowerCase().indexOf(searchTerm.toLowerCase()) > -1);\n        }\n      });\n    }\n\n    else if(this.searchBy == \"Retailer Type\"){\n      this.listings = this.listings.filter(currentListing => {\n        if (currentListing.retailerType && searchTerm) {\n          return (currentListing.retailerType.toLowerCase().indexOf(searchTerm.toLowerCase()) > -1);\n        }\n      });\n    }     \n    this.changeDetection.detectChanges(); \n  }\n\n  filterSearch(){\n    this.presentAlertRadio();\n    this.changeDetection.detectChanges(); \n  }\n\n  async presentAlertRadio() {\n    const alert = await this.alertController.create({\n      cssClass: 'my-custom-class',\n      header: 'Search By:',\n      inputs: [\n        {\n          name: 'radio1',\n          type: 'radio',\n          label: 'Retailer',\n          value: 'Retailer',\n          checked: true \n        },\n        {\n          name: 'radio2',\n          type: 'radio',\n          label: 'Retailer Type',\n          value: 'Retailer Type'\n        },\n        {\n          name: 'radio3',\n          type: 'radio',\n          label: 'Location',\n          value: 'Location'\n        }\n      ],\n      buttons: [\n        {\n          text: 'Cancel',\n          role: 'cancel',\n          cssClass: 'secondary',\n          handler: () => {\n          }\n        }, {\n          text: 'OK',\n          handler: (data:string) => {\n            this.searchText = \"Search By \" + data;\n            this.searchBy = data;\n            \n          }\n        }\n      ]\n    });\n\n    await alert.present();\n  }\n\n  async presentLoading() {\n    const loading = await this.loadingController.create({\n      duration: 700,\n      translucent: true,\n      cssClass: 'transparent',\n      backdropDismiss: false\n    });\n    await loading.present();\n\n    const { role, data } = await loading.onDidDismiss();\n    this.isReady = true; \n    this.changeDetection.detectChanges(); \n  }\n\n  async doRefresh(event) {\n    // this.isReady = false;\n    // this.presentLoading();\n    this.listings = await this.initializeItems();    \n    event.target.complete();\n  }\n\n  \n    getRetailer(uid) : String{  \n      if(this.retailers){\n       const user = this.retailers.find(element => element.retailerUID == uid);    \n       return user.name;\n \n      }\n    }\n\n  \n\n}"],"sourceRoot":"webpack:///"}