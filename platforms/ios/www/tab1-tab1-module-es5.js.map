{"version":3,"sources":["webpack:///src/app/tab1/tab1.page.html","webpack:///src/app/tab1/tab1-routing.module.ts","webpack:///src/app/tab1/tab1.module.ts","webpack:///src/app/tab1/tab1.page.scss","webpack:///src/app/tab1/tab1.page.ts"],"names":["routes","path","component","Tab1PageRoutingModule","imports","forChild","exports","Tab1PageModule","declarations","Tab1Page","listingService","afStorage","activatedRoute","nacCtrl","afAuth","firestore","changeDetection","loadingController","alertController","searchText","searchBy","isReady","presentLoading","initializeItems","listings","listing","self","forEach","element","ind","array","ref","retailerUID","getDownloadURL","toPromise","then","url","retailerURL","error","storageRef","data","deleteDate","description","listingID","location","name","price","quantity","retailerType","listingsBackup","event","searchTerm","srcElement","value","detectChanges","filter","currentListing","toLowerCase","indexOf","presentAlertRadio","create","cssClass","header","inputs","type","label","checked","buttons","text","role","handler","alert","present","duration","translucent","backdropDismiss","loading","onDidDismiss","target","complete","selector","template"],"mappings":"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","file":"tab1-tab1-module-es5.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar mode=\\\"ios\\\" color=\\\"primary\\\">\\n    <ion-title>Good Food</ion-title>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button autoHide=\\\"false\\\"></ion-menu-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content fullscreen [hidden]=\\\"!isReady\\\"> \\n\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"doRefresh($event)\\\">\\n    <ion-refresher-content></ion-refresher-content>\\n  </ion-refresher>\\n  \\n  <br>\\n  <ion-toolbar> \\n    <ion-row>\\n      <ion-col size=\\\"10\\\">\\n      <ion-searchbar mode=\\\"ios\\\" (ionInput)=\\\"search($event)\\\" placeholder = {{searchText}}></ion-searchbar>\\n    </ion-col>\\n      <ion-col size=\\\"1\\\">\\n      <ion-icon size=\\\"4\\\" name=\\\"options\\\" (click)=\\\"filterSearch()\\\"></ion-icon>\\n    </ion-col>\\n  </ion-row> \\n    </ion-toolbar> \\n    <!-- \\n    <ion-item>\\n      <ion-range id=\\\"dual-range\\\" dual-knobs pin color=\\\"primary\\\" [(ngModel)]=\\\"dualValue2\\\" min=\\\"0\\\" max=\\\"100\\\" step=\\\"1\\\" snaps=\\\"true\\\">\\n        <ion-label slot=\\\"start\\\" >0</ion-label>\\n        <ion-label slot=\\\"end\\\">100</ion-label>\\n      </ion-range>\\n    </ion-item> -->\\n  <div *ngFor=\\\"let item of listings\\\">   \\n    <ion-card [routerLink]=\\\"['/user-listing']\\\" [queryParams]=\\\"{ id: item.listingID }\\\" routerDirection=\\\"forward\\\">\\n     <!-- <ion-item> \\n       <ion-icon name=\\\"restaurant\\\" slot=\\\"start\\\"></ion-icon>\\n       <ion-label class=\\\"ion-text-wrap\\\">{{item.name}}</ion-label>   \\n      </ion-item> \\n       <ion-card> -->\\n        <!-- <img src=\\\"./madison.jpg\\\" /> -->\\n        \\n        <img src={{item.url}} style=\\\"width:100%;\\\"> \\n        <ion-card-header> \\n          <ion-card-title class=\\\"ion-text-wrap\\\">{{item.name}}</ion-card-title>\\n        </ion-card-header>\\n   \\n     <ion-card-content> \\n     \\n       <p> Price: ${{item.price | number:'1.2-2'}}</p>\\n       <p> Description: {{item.description}}</p>\\n       <p> Location: {{item.location}}</p>\\n       <p> Retailer Type: {{item.retailerType}}</p>\\n     </ion-card-content>\\n   </ion-card>\\n  </div>\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { Tab1Page } from './tab1.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: Tab1Page,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class Tab1PageRoutingModule {}\n","import { IonicModule } from '@ionic/angular';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Tab1Page } from './tab1.page';\n\nimport { Tab1PageRoutingModule } from './tab1-routing.module';\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    Tab1PageRoutingModule\n  ],\n  declarations: [Tab1Page]\n})\nexport class Tab1PageModule {}\n","export default \"ion-icon {\\n  font-size: 35px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdGFiMS90YWIxLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGVBQUE7QUFDSiIsImZpbGUiOiJzcmMvYXBwL3RhYjEvdGFiMS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24taWNvbiB7XG4gICAgZm9udC1zaXplOiAzNXB4O1xufSJdfQ== */\";","import { Component, OnInit, ChangeDetectorRef } from '@angular/core';\nimport { AngularFireAuth } from '@angular/fire/auth';\nimport { LoadingController, AlertController, NavController } from '@ionic/angular';\nimport { AngularFirestore } from '@angular/fire/firestore';\nimport { first } from 'rxjs/operators';\nimport { AngularFireStorage } from '@angular/fire/storage';\nimport { ActivatedRoute } from '@angular/router';\nimport { ListingsService} from '../listings.service';\n\n@Component({\n  selector: 'app-tab1',\n  templateUrl: 'tab1.page.html',\n  styleUrls: ['tab1.page.scss']\n})\nexport class Tab1Page implements OnInit{\n\n  public listings: any[];\n  public listingsBackup: any[];\n  deleteListings: any[];\n  searchText = \"Search By Food\";\n  searchBy = \"Food\";\n  dateNow;\n  url; \n  retailerUID;\n  ID;\n  isReady: Boolean = false;\n\n\n  constructor(public listingService: ListingsService, private afStorage: AngularFireStorage, private activatedRoute: ActivatedRoute, private nacCtrl: NavController, public afAuth: AngularFireAuth, private firestore: AngularFirestore, private changeDetection: ChangeDetectorRef, public loadingController: LoadingController, public alertController: AlertController) {}\n\n\n  async ngOnInit() {\n    this.presentLoading(); \n    this.listings = await this.initializeItems();\n    \n}\n\n\nasync initializeItems(): Promise<any> {\n  let listing: any[] = await this.listingService.initializeItems();  \n\n  var self = this;\n  listing.forEach(async function(element, ind, array) { \n  var retailerURL;\n    var storageRef =  await self.afStorage.ref(`images/${element.retailerUID}`).getDownloadURL().toPromise().then(function(url) {\n      retailerURL = url;\n   }).catch(function(error) {\n     retailerURL = 'assets/images/default.png';\n   });\n    const data = {\n      deleteDate: element.deleteDate,\n      description: element.description,\n      listingID: element.listingID,\n      location: element.location,\n      name: element.name,\n      price: element.price,\n      quantity: element.quantity,\n      retailerType: element.retailerType,     \n      retailerUID: element.retailerUID,\n      url: retailerURL      \n    }   \n    array[ind] = data \n  });\n\n  this.listingsBackup = listing;  \n  return listing;\n}\n\n \n\n  search(event){\n    this.listings = this.listingsBackup;\n    const searchTerm = event.srcElement.value;\n\n    if(!searchTerm){\n      this.changeDetection.detectChanges(); \n      return;\n    }\n\n    if(this.searchBy == \"Food\"){\n      this.listings = this.listings.filter(currentListing => {\n        if (currentListing.name && searchTerm) {\n          return (currentListing.name.toLowerCase().indexOf(searchTerm.toLowerCase()) > -1);\n        }\n      });  \n    }\n\n    else if(this.searchBy == \"Location\"){\n      this.listings = this.listings.filter(currentListing => {\n        if (currentListing.location && searchTerm) {\n          return (currentListing.location.toLowerCase().indexOf(searchTerm.toLowerCase()) > -1);\n        }\n      });\n    }\n\n    else if(this.searchBy == \"Retailer\"){\n      this.listings = this.listings.filter(currentListing => {\n        if (currentListing.retailerType && searchTerm) {\n          return (currentListing.retailerType.toLowerCase().indexOf(searchTerm.toLowerCase()) > -1);\n        }\n      });\n    }     \n    this.changeDetection.detectChanges(); \n  }\n\n  filterSearch(){\n    this.presentAlertRadio();\n    this.changeDetection.detectChanges(); \n  }\n\n  async presentAlertRadio() {\n    const alert = await this.alertController.create({\n      cssClass: 'my-custom-class',\n      header: 'Search By:',\n      inputs: [\n        {\n          name: 'radio1',\n          type: 'radio',\n          label: 'Food',\n          value: 'Food',\n          checked: true\n        },\n        {\n          name: 'radio2',\n          type: 'radio',\n          label: 'Retailer',\n          value: 'Retailer'\n        },\n        {\n          name: 'radio3',\n          type: 'radio',\n          label: 'Location',\n          value: 'Location'\n        }\n      ],\n      buttons: [\n        {\n          text: 'Cancel',\n          role: 'cancel',\n          cssClass: 'secondary',\n          handler: () => {\n          }\n        }, {\n          text: 'OK',\n          handler: (data:string) => {\n            this.searchText = \"Search By \" + data;\n            this.searchBy = data;\n            \n          }\n        }\n      ]\n    });\n\n    await alert.present();\n  }\n\n  async presentLoading() {\n    const loading = await this.loadingController.create({\n      duration: 700,\n      translucent: true,\n      cssClass: 'transparent',\n      backdropDismiss: false\n    });\n    await loading.present();\n\n    const { role, data } = await loading.onDidDismiss();\n    this.isReady = true; \n    this.changeDetection.detectChanges(); \n  }\n\n  async doRefresh(event) {\n    this.listings = await this.initializeItems();    \n    event.target.complete();\n  }\n\n}"]}