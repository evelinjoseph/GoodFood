{"version":3,"sources":["webpack:///src/app/retailertab1/retailertab1.page.html","webpack:///src/app/retailertab1/retailertab1-routing.module.ts","webpack:///src/app/retailertab1/retailertab1.module.ts","webpack:///src/app/retailertab1/retailertab1.page.scss","webpack:///src/app/retailertab1/retailertab1.page.ts"],"names":["routes","path","component","Retailertab1PageRoutingModule","imports","forChild","exports","Retailertab1PageModule","declarations","Retailertab1Page","listingService","afstore","afAuth","changeDetection","alertCtrl","isReady","self","onAuthStateChanged","user","retailerUID","uid","items","doc","retailerItems","valueChanges","initializeItems","users","getUsers","retailers","filter","currentUser","isRetailer","console","log","detectChanges","find","element","userUID","firstname","lastname","name","selector","template"],"mappings":"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","file":"retailertab1-retailertab1-module-es5.js","sourcesContent":["export default \"<ion-header style=\\\"text-align: center\\\">\\n  <ion-toolbar mode=\\\"ios\\\" color=\\\"primary\\\">\\n    <ion-title>Good Food</ion-title>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button autoHide=\\\"true\\\"></ion-menu-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content fullscreen [hidden]=\\\"!isReady\\\" >\\n\\n  <div *ngIf=\\\"!((retailerItems | async)?.isVerified) ; else verified\\\" class=\\\"centerText\\\">\\n    <ion-text class=\\\"centerText\\\" color=\\\"primary\\\" style=\\\"text-align: center\\\">\\n      <p>Your account is not verified yet, please wait until verified to gain access to this tab!</p>\\n    </ion-text>\\n  </div>\\n  <ng-template #verified>\\n    <div *ngFor=\\\"let item of ((retailerItems | async)?.orders).sort().reverse()\\\">\\n      <ion-card>\\n\\n      <ion-item>\\n        <ion-card-title class=\\\"ion-text-wrap\\\">{{getRetailer(item.retailerUID)}}</ion-card-title>\\n      </ion-item>\\n    \\n      <ion-card-content> \\n          <p> Description: {{item.description}}</p>\\n          <p> Ordered: {{item.date.toDate().toLocaleString()}}</p>\\n          <p> User: {{getUser(item.userUID)}}</p>      \\n      </ion-card-content>\\n    </ion-card>\\n    </div>  \\n    \\n      <ion-text *ngIf=\\\"((retailerItems | async)?.orders).length <= 0\\\" class=\\\"centerText\\\" color=\\\"primary\\\" style=\\\"text-align: center\\\">\\n        <p>There are no orders currently.</p>\\n      </ion-text>\\n  </ng-template>  \\n</ion-content>\\n\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { Retailertab1Page } from './retailertab1.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: Retailertab1Page\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class Retailertab1PageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { Retailertab1PageRoutingModule } from './retailertab1-routing.module';\n\nimport { Retailertab1Page } from './retailertab1.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    Retailertab1PageRoutingModule\n  ],\n  declarations: [Retailertab1Page]\n})\nexport class Retailertab1PageModule {}\n","export default \".centerText {\\n  height: 90% !important;\\n  display: flex !important;\\n  align-items: center !important;\\n  justify-content: center !important;\\n  align-content: center !important;\\n  flex-wrap: wrap !important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcmV0YWlsZXJ0YWIxL3JldGFpbGVydGFiMS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxzQkFBQTtFQUNBLHdCQUFBO0VBQ0EsOEJBQUE7RUFDQSxrQ0FBQTtFQUNBLGdDQUFBO0VBQ0EsMEJBQUE7QUFDSiIsImZpbGUiOiJzcmMvYXBwL3JldGFpbGVydGFiMS9yZXRhaWxlcnRhYjEucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmNlbnRlclRleHQge1xuICAgIGhlaWdodDogOTAlICFpbXBvcnRhbnQ7XG4gICAgZGlzcGxheTogZmxleCAhaW1wb3J0YW50O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXIgIWltcG9ydGFudDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlciAhaW1wb3J0YW50O1xuICAgIGFsaWduLWNvbnRlbnQ6IGNlbnRlciAhaW1wb3J0YW50O1xuICAgIGZsZXgtd3JhcDogd3JhcCAhaW1wb3J0YW50OyAgICBcbiB9Il19 */\";","import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\nimport { AngularFireAuth } from '@angular/fire/auth';\nimport { AngularFirestore } from '@angular/fire/firestore';\nimport { AlertController } from '@ionic/angular';\nimport { ListingsService } from '../listings.service';\n\n@Component({\n  selector: 'app-retailertab1',\n  templateUrl: './retailertab1.page.html',\n  styleUrls: ['./retailertab1.page.scss'],\n})\nexport class Retailertab1Page implements OnInit {\n  retailerUID;\n  retailerItems;\n  items;\n  retailerName;\n  isReady = false;\n  users: any[];\n  retailers: any[];\n\n  constructor(public listingService: ListingsService, public afstore: AngularFirestore, public afAuth: AngularFireAuth, private changeDetection: ChangeDetectorRef, public alertCtrl: AlertController) { }\n\n  ngOnInit() {\n    var self = this\n    this.afAuth.onAuthStateChanged(async function(user) {        \n      if (user) {              \n        self.retailerUID = user.uid\n        self.items = self.afstore.doc(`users/${self.retailerUID}`);\n        self.retailerItems = self.items.valueChanges(); \n        await self.listingService.initializeItems();\n        self.users = self.listingService.getUsers();\n\n        self.retailers = self.users.filter(currentUser => {\n          if (currentUser.isRetailer) {\n            return (currentUser.isRetailer);\n          }\n        });  \n        self.users = self.users.filter(currentUser => {\n          if (!currentUser.isRetailer) {\n            return (!currentUser.isRetailer);\n          }\n        });  \n        console.log(self.users);\n        self.isReady = true;\n        self.changeDetection.detectChanges(); \n      }\n      else{\n        console.log('no user signed in');\n      }\n    });\n  }\n\n  ionViewWillEnter(){\n    if(this.items){\n      this.retailerItems = this.items.valueChanges();\n      this.changeDetection.detectChanges(); \n      this.isReady = true;\n    }    \n  }\n\n  getUser(uid) { \n    if(this.users){\n      const user = this.users.find(element => element.userUID == uid);\n      return user.firstname + \" \" + user.lastname + \" (\" + uid + \")\";\n    }\n   \n  }\n\n  getRetailer(uid) : String{  \n    if(this.retailers){\n     const user = this.retailers.find(element => element.retailerUID == uid);    \n     return user.name;\n\n    }\n  }\n\n}\n"]}