{"version":3,"sources":["webpack:///src/app/retailer-update-password/retailer-update-password.page.html","webpack:///src/app/retailer-update-password/retailer-update-password-routing.module.ts","webpack:///src/app/retailer-update-password/retailer-update-password.module.ts","webpack:///src/app/retailer-update-password/retailer-update-password.page.scss","webpack:///src/app/retailer-update-password/retailer-update-password.page.ts"],"names":["routes","path","component","RetailerUpdatePasswordPageRoutingModule","imports","forChild","exports","RetailerUpdatePasswordPageModule","declarations","RetailerUpdatePasswordPage","afAuth","nacCtrl","alertController","password","newpassword","cpassword","self","trim","length","Error","signInWithEmailAndPassword","currentUser","email","then","updatePassword","alert","navigateRoot","error","presentAlert","message","errorMessage","promise","Promise","resolve","resolveFunction","create","header","buttons","text","handler","present","console","log","selector","template"],"mappings":"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","file":"retailer-update-password-retailer-update-password-module-es5.js","sourcesContent":["export default \"<ion-header style=\\\"text-align: center\\\">\\n  <ion-toolbar color=\\\"primary\\\" mode=\\\"ios\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button [text]=\\\"Back\\\" defaultHref='/retailertabs/retailertabs/retailertab3'></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>\\n      Good Food\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content style=\\\"text-align: center\\\">\\n  <img class=\\\"displayed\\\" height=\\\"250 px\\\" width=\\\"250 px\\\" src=\\\"assets/images/GoodFoodLogo.png\\\" alt=\\\"logo\\\">\\n    <div padding>\\n      <small>\\n        Please enter the current password and new password for your Good Food account.\\n      </small>\\n      <br>\\n      <ion-item>\\n        <ion-label position = \\\"floating\\\">\\n            Current Password\\n          </ion-label>\\n          <ion-input type=\\\"password\\\" [(ngModel)]=\\\"password\\\"></ion-input>\\n      </ion-item>\\n      <br>\\n      <ion-item>\\n        <ion-label position = \\\"floating\\\">\\n            New Password\\n          </ion-label>\\n          <ion-input type=\\\"password\\\" [(ngModel)]=\\\"newpassword\\\"></ion-input>\\n      </ion-item>\\n      <br>\\n      <ion-item>\\n        <ion-label position = \\\"floating\\\">\\n          Confirm Password\\n        </ion-label>\\n        <ion-input type=\\\"password\\\" [(ngModel)]=\\\"cpassword\\\"></ion-input>\\n    </ion-item>\\n    <br>\\n    <ion-button type=\\\"submit\\\" color=\\\"primary\\\" expand=\\\"block\\\" (click)=\\\"updatePassword()\\\">Update Password</ion-button>\\n    \\n  </div>\\n\\n\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { RetailerUpdatePasswordPage } from './retailer-update-password.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: RetailerUpdatePasswordPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class RetailerUpdatePasswordPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { RetailerUpdatePasswordPageRoutingModule } from './retailer-update-password-routing.module';\n\nimport { RetailerUpdatePasswordPage } from './retailer-update-password.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RetailerUpdatePasswordPageRoutingModule\n  ],\n  declarations: [RetailerUpdatePasswordPage]\n})\nexport class RetailerUpdatePasswordPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3JldGFpbGVyLXVwZGF0ZS1wYXNzd29yZC9yZXRhaWxlci11cGRhdGUtcGFzc3dvcmQucGFnZS5zY3NzIn0= */\";","import { Component, OnInit, Query } from '@angular/core';\nimport { AngularFireAuth } from '@angular/fire/auth';\nimport { AlertController, NavController } from '@ionic/angular';\nimport * as firebase from 'firebase';\n\n@Component({\n  selector: 'app-retailer-update-password',\n  templateUrl: './retailer-update-password.page.html',\n  styleUrls: ['./retailer-update-password.page.scss'],\n})\nexport class RetailerUpdatePasswordPage implements OnInit {\n  password: string = \"\";\n  newpassword: string = \"\";\n  cpassword: string = \"\";\n\n  constructor(public afAuth: AngularFireAuth, private nacCtrl: NavController,  public alertController: AlertController) { }\n\n  ngOnInit() {\n  }\n\n  updatePassword(){\n    try{\n      let self = this;\n      const {password, newpassword, cpassword} = this\n      if(password.trim().length==0){\n        throw new Error('Please Enter Current Password');\n      } \n      if(newpassword.trim().length==0){\n        throw new Error('Please Enter New Password');\n      } \n      if(cpassword.trim().length==0){\n        throw new Error('Please Confirm Password');\n      } \n      if(newpassword !== cpassword){      \n        throw new Error('Passwords Do Not Match');\n      }\n      self.afAuth.signInWithEmailAndPassword(firebase.auth().currentUser.email, password).then(function() {\n        \n        firebase.auth().currentUser.updatePassword(newpassword).then(function() {\n              alert(\"Password Updated\");\n              self.password = \"\";\n              self.newpassword = \"\";\n              self.cpassword = \"\";\n              self.nacCtrl.navigateRoot(['/retailertabs/retailertabs/retailertab3'])\n\n            }).catch(function(error) {\n               self.presentAlert(error)\n            });\n          }).catch(function(error) {\n            self.presentAlert(error)\n         });\n    }\n    catch(error){\n      this.presentAlert(error.message);\n    }\n  }\n\n  public async presentAlert(errorMessage) : Promise<boolean> {\n    let resolveFunction: (confirm: boolean) => void;\n    const promise = new Promise<boolean>(resolve => {\n      resolveFunction = resolve;\n    });\n    \n    const alert = await this.alertController.create({\n      header: 'Update Password Error',\n      message: errorMessage,\n      buttons: [\n        {\n          text: 'OK',\n            handler: () => resolveFunction(true)\n        }\n      ]\n    });\n    \n  await alert.present();\n  return promise;\n}\n\n  ngOnDestroy() {\n    this.password = \"\";\n    this.newpassword = \"\";\n    this.cpassword = \"\";\n    console.log(\"Left update password\")\n  }\n\n}\n"]}