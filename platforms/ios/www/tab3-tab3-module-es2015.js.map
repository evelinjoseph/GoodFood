{"version":3,"sources":["./src/app/tab3/tab3.page.html","./src/app/tab3/tab3-routing.module.ts","./src/app/tab3/tab3.module.ts","./src/app/tab3/tab3.page.scss","./src/app/tab3/tab3.page.ts"],"names":[],"mappings":"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","file":"tab3-tab3-module-es2015.js","sourcesContent":["export default \"<ion-header style=\\\"text-align: center\\\">\\n  <ion-toolbar mode=\\\"ios\\\" color=\\\"primary\\\">\\n    <ion-title>Good Food</ion-title>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button autoHide=\\\"true\\\"></ion-menu-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content fullscreen [hidden]=\\\"!isReady\\\">\\n  <div *ngFor=\\\"let item of cart\\\">\\n    <ion-card>\\n     <ion-item>\\n      <ion-card-title class=\\\"ion-text-wrap\\\">{{getRetailer(item.retailerUID)}}</ion-card-title>\\n      <ion-button  (click)=\\\"delete(item)\\\" fill=\\\"outline\\\" slot=\\\"end\\\">Delete</ion-button> \\n    </ion-item>\\n   \\n     <ion-card-content> \\n        <p style=\\\"font-size: large;\\\" > Quantity: \\n          <ion-button (click)=\\\"dec(item)\\\" size=\\\"small\\\" fill=\\\"clear\\\"> \\n            <ion-icon name=\\\"remove-circle-outline\\\"></ion-icon> \\n          </ion-button>\\n          {{item.quantityCart}}\\n          <ion-button (click)=\\\"inc(item)\\\" size=\\\"small\\\" fill=\\\"clear\\\"> \\n            <ion-icon name=\\\"add-circle-outline\\\"></ion-icon> \\n          </ion-button></p>\\n          <p style=\\\"font-size: large;\\\"> Price: ${{item.totalPrice | number:'1.2-2'}}</p>\\n     </ion-card-content>\\n   </ion-card>\\n  </div>\\n  <ion-text class=\\\"centerText\\\" *ngIf=\\\"((userItems | async)?.cart).length <= 0\\\" color=\\\"primary\\\" style=\\\"text-align: center\\\">\\n      <p>There are no items in the cart.</p>\\n  </ion-text>  \\n</ion-content>\\n\\n<ion-footer *ngIf=\\\"((userItems | async)?.cart).length > 0\\\" >\\n  <!-- class=\\\"ion-no-border\\\" -->\\n \\n  <ion-toolbar *ngIf=\\\"userItems | async as cartData\\\"  position=\\\"bottom\\\" style=\\\"text-align: center;\\\">\\n    <div class=\\\"ion-text-end\\\" id=\\\"subtotal\\\">\\n      <ion-text > <p style=\\\"font-size: large;\\\"> Subtotal: ${{subtotal | number:'1.2-2'}} </p></ion-text> \\n    </div>     \\n    <ion-button expand=\\\"block\\\" (click)=\\\"checkOut(cartData.cart)\\\" size=\\\"large\\\">Checkout</ion-button>\\n </ion-toolbar>\\n</ion-footer>\\n\";","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { Tab3Page } from './tab3.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: Tab3Page,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class Tab3PageRoutingModule {}\n","import { IonicModule } from '@ionic/angular';\nimport { RouterModule } from '@angular/router';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Tab3Page } from './tab3.page';\n\nimport { Tab3PageRoutingModule } from './tab3-routing.module'\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    RouterModule.forChild([{ path: '', component: Tab3Page }]),\n    Tab3PageRoutingModule,\n  ],\n  declarations: [Tab3Page]\n})\nexport class Tab3PageModule {}\n","export default \".large {\\n  font-size: 1500%;\\n}\\n\\n.centerText {\\n  height: 90% !important;\\n  display: flex !important;\\n  align-items: center !important;\\n  justify-content: center !important;\\n  align-content: center !important;\\n  flex-wrap: wrap !important;\\n}\\n\\n#subtotal {\\n  padding-right: 2%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdGFiMy90YWIzLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGdCQUFBO0FBQ0o7O0FBRUE7RUFDSSxzQkFBQTtFQUNBLHdCQUFBO0VBQ0EsOEJBQUE7RUFDQSxrQ0FBQTtFQUNBLGdDQUFBO0VBQ0EsMEJBQUE7QUFDSjs7QUFFQztFQUNHLGlCQUFBO0FBQ0oiLCJmaWxlIjoic3JjL2FwcC90YWIzL3RhYjMucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmxhcmdle1xuICAgIGZvbnQtc2l6ZTogMTUwMCU7XG59XG5cbi5jZW50ZXJUZXh0IHtcbiAgICBoZWlnaHQ6IDkwJSAhaW1wb3J0YW50O1xuICAgIGRpc3BsYXk6IGZsZXggIWltcG9ydGFudDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyICFpbXBvcnRhbnQ7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXIgIWltcG9ydGFudDtcbiAgICBhbGlnbi1jb250ZW50OiBjZW50ZXIhaW1wb3J0YW50O1xuICAgIGZsZXgtd3JhcDogd3JhcCAhaW1wb3J0YW50OyAgICBcbiB9XG5cbiAjc3VidG90YWx7XG4gICAgcGFkZGluZy1yaWdodDogMiU7XG4gfVxuXG4iXX0= */\";","import { ChangeDetectorRef, Component, OnInit } from '@angular/core';\nimport { AngularFirestore } from '@angular/fire/firestore';\nimport { AngularFireAuth } from '@angular/fire/auth';\nimport { AlertController, NavController } from '@ionic/angular';\nimport * as firebase from 'firebase/app';\nimport { ListingsService} from '../listings.service';\n\n@Component({\n  selector: 'app-tab3',\n  templateUrl: 'tab3.page.html',\n  styleUrls: ['tab3.page.scss']\n})\nexport class Tab3Page implements OnInit{\n  userUID;\n  userItems;\n  items;\n  cart = [];\n  listing;\n  name;\n  description;\n  location;\n  price;\n  quantity;\n  retailerType;\n  retailerUID;\n  date: Date;\n  subtotal = 0;\n  isReady = false;\n  retailers: any[];\n\n  constructor(public listingService: ListingsService, public afauth: AngularFireAuth, private nacCtrl: NavController, public afstore: AngularFirestore, private changeDetection: ChangeDetectorRef, public alertCtrl: AlertController) {}\n\n  ngOnInit() { \n    var self = this\n    this.cart = []\n    this.subtotal = 0;\n    this.afauth.onAuthStateChanged(async function(user) {        \n      if (user) {        \n        self.userUID = user.uid\n        self.items = self.afstore.doc(`users/${self.userUID}`);\n        self.userItems = self.items.valueChanges();\n        await self.listingService.initializeItems();\n        self.retailers = self.listingService.getUsers().filter(currentUser => {\n          if (currentUser.isRetailer) {\n            return (currentUser.isRetailer);\n          }\n        });   \n        self.changeDetection.detectChanges(); \n        self.getCart();  \n\n      }\n    });    \n  }\n\n  async ionViewWillEnter(){\n    this.cart = []\n    this.subtotal = 0;\n    if(this.items){\n      this.userItems = this.items.valueChanges();\n      await this.listingService.initializeItems();\n      this.retailers = this.listingService.getUsers().filter(currentListing => {\n        if (currentListing.isRetailer) {\n          return (currentListing.isRetailer);\n        }\n      }); \n      this.getCart();\n      this.changeDetection.detectChanges(); \n\n      \n    }    \n  }\n\n  async getCart(){    \n    var self = this;\n    await this.afstore.doc(`users/${this.userUID}`).get().toPromise().then(function(querySnapshot) {\n      self.cart = []\n      self.subtotal = 0\n      var cart1 = querySnapshot.get(\"cart\");\n      self.changeDetection.detectChanges(); \n      cart1.forEach(element => {\n        self.cart.push(element);  \n        self.subtotal += element.totalPrice          \n        });            \n    })\n    .catch(function(error) {\n        console.log(\"Error getting documents\");\n    }); \n\n    this.changeDetection.detectChanges();  \n    this.isReady = true;   \n  }\n\n  async delete(item){\n\n    const confirm = await this.presentAlertDelete();\n    if (confirm) {\n    this.afstore.doc(`users/${this.userUID}`).update({\n      cart: firebase.firestore.FieldValue.arrayRemove({\n        description: item.description,\n        listingID: item.listingID,\n        retailerUID: item.retailerUID,\n        quantity: item.quantity,\n        quantityCart: item.quantityCart,\n        price: item.price,\n        totalPrice: item.totalPrice\n      })\n    })\n    this.cart = this.cart.filter(currentListing => {\n      if (currentListing.listingID && item.listingID) {\n        return (!(currentListing.listingID.toLowerCase() === item.listingID.toLowerCase()));\n      }\n    }); \n    this.subtotal -= item.totalPrice; \n  }\n  }\n\n  async presentAlertDelete() : Promise<boolean> {\n    let resolveFunction: (confirm: boolean) => void;\n    const promise = new Promise<boolean>(resolve => {\n      resolveFunction = resolve;\n    });\n    const alert = await this.alertCtrl.create({\n      header: 'Confirm Delete',\n      message: 'Are you sure you want to delete this item from your cart?',\n      buttons: [\n        {\n          text: 'Yes',\n            handler: () => resolveFunction(true)\n        }, {\n          text: 'No',\n          handler: () => resolveFunction(false)\n        }\n      ]\n    });\n\n    await alert.present();\n    return promise;\n  }\n\n  inc(item){   \n    if(item.quantityCart + 1 <= item.quantity){\n\n      var quantityValue = item.quantityCart + 1; \n      var priceValue = item.totalPrice + item.price;\n\n      this.afstore.doc(`users/${this.userUID}`).update({\n        cart: firebase.firestore.FieldValue.arrayUnion({\n          description: item.description,\n          listingID: item.listingID,\n          retailerUID: item.retailerUID,\n          quantity: item.quantity,\n          quantityCart: quantityValue,\n          price: item.price,\n          totalPrice: priceValue\n        })\n      })\n  \n      this.afstore.doc(`users/${this.userUID}`).update({\n        cart: firebase.firestore.FieldValue.arrayRemove({\n          description: item.description,\n          listingID: item.listingID,\n          retailerUID: item.retailerUID,\n          quantity: item.quantity,\n          quantityCart: item.quantityCart,\n          price: item.price,\n          totalPrice: item.totalPrice\n        })\n      })\n      item.quantityCart++;\n      item.totalPrice += item.price;\n      this.subtotal += item.price;\n      \n    }  \n  }\n\n  dec(item){    \n    if(item.quantityCart - 1 > 0){\n      var quantityValue = item.quantityCart - 1;  \n      var priceValue = item.totalPrice - item.price;\n\n      this.afstore.doc(`users/${this.userUID}`).update({\n        cart: firebase.firestore.FieldValue.arrayUnion({\n          description: item.description,\n          listingID: item.listingID,\n          retailerUID: item.retailerUID,\n          quantity: item.quantity,\n          quantityCart: quantityValue,\n          totalPrice: priceValue,\n          price: item.price\n        })\n      })\n  \n      this.afstore.doc(`users/${this.userUID}`).update({\n        cart: firebase.firestore.FieldValue.arrayRemove({\n          description: item.description,\n          listingID: item.listingID,\n          retailerUID: item.retailerUID,\n          quantity: item.quantity,\n          quantityCart: item.quantityCart,\n          price: item.price,\n          totalPrice: item.totalPrice\n        })\n      })\n      item.quantityCart--;\n      item.totalPrice -= item.price;\n      this.subtotal -= item.price;\n    }\n  }\n\n\n  getRetailer(uid) : String{  \n    if(this.retailers){\n     const user = this.retailers.find(element => element.retailerUID == uid);    \n     return user.name;\n\n    }\n  }\n\n  async checkOut(cart){\n    const confirm = await this.presentAlertCheck();\n    if (confirm) {\n      this.nacCtrl.navigateRoot(['./paypal']);\n    }   \n  }\n\n  public async presentAlertCheck() : Promise<boolean> {\n    let resolveFunction: (confirm: boolean) => void;\n    const promise = new Promise<boolean>(resolve => {\n      resolveFunction = resolve;\n    });\n    const alert = await this.alertCtrl.create({\n      header: 'Confirm Check-Out',\n      message: 'Are you sure you want to check out these items from your cart?',\n      buttons: [\n        {\n          text: 'No',\n          handler: () => resolveFunction(false)\n        },\n        {\n          text: 'Yes',\n            handler: () => resolveFunction(true)\n        }\n      ]\n    });\n\n    await alert.present();\n    return promise;\n  }\n}\n"],"sourceRoot":"webpack:///"}